

# Оптимизация производительности сайта

## Выявленные проблемы:

1. **Использование обычного `<img>` вместо Next.js `Image`** - изображения не оптимизируются
2. **Загрузка всех товаров сразу** без пагинации
3. **Множественные запросы к базе данных** на одной странице
4. **Отсутствие кэширования** запросов
5. **Загрузка всех заказов** в статистике без лимита
6. **Большие вложенные запросы** (N+1 проблема)
7. **Отсутствие lazy loading** для изображений

## Решения:

### 1. Использовать Next.js Image компонент
- Автоматическая оптимизация изображений
- Lazy loading по умолчанию
- Поддержка WebP формата
- Responsive images

### 2. Добавить пагинацию для товаров
- Загружать по 20-30 товаров за раз
- Infinite scroll или кнопка "Загрузить еще"

### 3. Оптимизировать запросы к базе данных
- Использовать индексы
- Ограничивать количество данных
- Использовать select только нужных полей

### 4. Добавить кэширование
- React Query или SWR для кэширования запросов
- Next.js ISR (Incremental Static Regeneration)

### 5. Оптимизировать компоненты
- React.memo для предотвращения лишних ре-рендеров
- useMemo для тяжелых вычислений

### 6. Оптимизировать статистику
- Загружать только нужные данные
- Использовать агрегатные функции в SQL
- Кэшировать результаты

